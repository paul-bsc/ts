<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href='static/bootstrap.min.css'>

	<link rel="stylesheet" type="text/css" href='https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css'>
    <style>

    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      text-align: center;
    }

    .topnav {
      overflow: hidden;
      background-color: #29746F;
    }

    .topnav a {
      float: right;
      color: white;
      text-align: center;
      padding: 10px 10px;
      text-decoration: none;
      font-size: 17px;
    }

    .topnav a:hover {
      background-color: #ddd;
      color: black;
    }

    .topnav a.active {
      background-color: #F16767;
      color: white;
    }

    /*  SECTIONS  */
    .section {
        clear: both;
        padding: 0px;
        margin: 0px;
    }

    /*  COLUMN SETUP  */
    .col {
        display: block;
        float:left;
        //margin: 1% 0 1% 1.6%;
    }
    .col:first-child { margin-left: 0; }

    /*  GROUPING  */
    .group:before,
    .group:after { content:""; display:table; }
    .group:after { clear:both;}
    .group { zoom:1; /* For IE 6/7 */ }

    /*  GRID OF THREE  */
    .span_3_of_3 { width: 100%; }
    .span_2_of_3 { width: 66.13%; }
    .span_1_of_3 { width: 32.26%; }

    /*  GO FULL WIDTH BELOW 480 PIXELS */
    @media only screen and (max-width: 480px) {
        .col {  margin: 1% 0 1% 0%; }
        .span_3_of_3, .span_2_of_3, .span_1_of_3 { width: 100%; }
    }

	/* The Modal (background) */
	.modal {
		display: none; /* Hidden by default */
		position: fixed; /* Stay in place */
		z-index: 1; /* Sit on top */
		left: 0;
		top: 0;
		width: 100%; /* Full width */
		height: 100%; /* Full height */
		overflow: auto; /* Enable scroll if needed */
		background-color: rgb(0,0,0); /* Fallback color */
		background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
	}

	/* Modal Content/Box */
	.modal-content {
		background-color: #fefefe;
		margin: 15% auto; /* 15% from the top and centered */
		padding: 20px;
		border: 1px solid #888;
		width: 80%; /* Could be more or less, depending on screen size */
	}

	/* The Close Button */
	.close {
		color: #aaa;
		float: right;
		font-size: 28px;
		font-weight: bold;
	}

	.close:hover,
	.close:focus {
		color: black;
		text-decoration: none;
		cursor: pointer;
	}

	.table_container {
	    display: inline-block;
	    width: 100%;
	    max-height: 100px;
        padding-left: 20px;
        padding-right: 20px;
        zoom: 0.99;
	}

    </style>
	<script src='static/jquery-1.12.4.js'></script>
	<script src='static/bootstrap.min.js'></script>
	<script src='https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js'></script>
	<script src='static/dataTables.bootstrap.min.js'></script>
	<script src='static/Chart.min.js'></script>
</head>
<body>

<div class="topnav">
    <a href="#logout" id="logout_button">Log Out</a>
    <a href="#user" id="user_button">Me</a>
	<a href="#search" id="search_button">Search</a>
  <a class="active" href="#stats" id="stats_button">Statistics Panel</a>
</div>

<div class="section group">
	<div class="col span_1_of_3">
        <h2>Employees</h2>
        <h1>{{employee_count}}</h1>
	</div>
	<div class="col span_1_of_3">
        <h2>Developers</h2>
	    <canvas id="chart"></canvas>
	</div>
	<div class="col span_1_of_3">
		<h2>Birthdays</h2>
		<h1>{{birthdays}}</h1>
	</div>
</div>
<div class="table_container">
	<table id="employee_table" class="table table-striped table-bordered" style="width:100%">
    </table>
</div>
<div id="user_profile" class="modal">
	  <!-- Modal content -->
<div class="modal-content">
<span class="close">&times;</span>
<div class="section group">
	<div class="col span_1_of_3">
        <h2>Employee Info</h2>

	</div>
	<div class="col span_1_of_3">
        <h2>Next of Kin</h2>
	</div>
	<div class="col span_1_of_3">
	<h2>Reviews</h2>
	</div>
</div>
</div>
</div>

<script>

	//get data
	bar_data =JSON.parse({{bar_datasets |tojson}});
	label_data = JSON.parse({{labels |tojson}});
	column_names = JSON.parse({{column_names |tojson}});
	column_values = JSON.parse({{column_values |tojson}});

   // get bar chart canvas
   var ctx = document.getElementById("chart").getContext("2d");
   //draw
   var bar = new Chart(ctx, {
    type: 'horizontalBar',
    data: {
    		labels: label_data,
    		datasets: bar_data
    	},
    options: {
        responsive: true,
        legend: {
            display: true
         },
        scales: {
        xAxes: [{
            display: true,
            stacked: true,
            ticks: {
                beginAtZero: true,
                stepSize: 1
            }
        }]
    }
    }
   });

	// Get the modal
	var modal = document.getElementById('user_profile');

	// Get the button that opens the modal
	var btn = document.getElementById("user_button");

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks on the button, open the modal
	btn.onclick = function() {
		modal.style.display = "block";
	}

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
		modal.style.display = "none";
	}

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
		if (event.target == modal) {
			modal.style.display = "none";
		}
	}

	//create table
	$(document).ready(function() {
    $('#employee_table').DataTable({
        scrollY: false,
        data: column_values,
        columns: column_names
    });
	});


</script>
</body>
</html>
